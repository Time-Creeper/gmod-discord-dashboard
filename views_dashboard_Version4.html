<!DOCTYPE html>
<html>
<head>
    <title>Your Dashboard</title>
    <script>
        async function loadStatus() {
            const res = await fetch('/api/status');
            const data = await res.json();
            document.getElementById('info').innerHTML = data.linked
                ? `SteamID: ${data.steamid}<br>Last GMod login: ${data.last_login ? new Date(data.last_login * 1000).toLocaleString() : 'Never'}<br>Status: <b>${data.status}</b>`
                : 'No SteamID linked yet.';
        }
        window.onload = loadStatus;
    </script>
</head>
<body>
    <h1>Your Dashboard</h1>
    <form method="POST" action="/link">
        <label>Link your SteamID:</label>
        <input name="steamid" required>
        <button type="submit">Link</button>
    </form>
    <div id="info"></div>
    <a href="/logout">Logout</a>
</body>
</html>